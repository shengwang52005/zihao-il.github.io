import{s as U,n as $,g as N,m as j,v as D,w as P,h as q,x as G,y as O,j as W,o as H,d as J,p as K,u as Q}from"./@varlet-1f53858d.js";import{s as X,g as Y}from"./index-31133a08.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import{r as ee,o as te,f as l,q as b,z as w,O as a,P as n,F as y,G as i,u as ae,i as se,I as ne,s as oe,t as re,A as x}from"./@vue-86d35308.js";import"./axios-21b846bc.js";const le={__name:"download",setup(ie){const v=ee([]);async function u(s,e,o){let r;if(o===!0){const{data:d}=await X(s);if(d.status===201)return U.error("无此版本号！");r=d.message}else{const{data:d}=await Y(s);r=d.message}const g=l(r.slice().reverse());e===!0?v.splice(0,v.length,...g.value):v.push(...g.value)}te(()=>{let s=setInterval(function(){let e=sessionStorage.getItem("Beta");e!==null&&(clearInterval(s),u({v:e}),sessionStorage.setItem("version",e))},100)});const m=l("");l("");let c=l(!0);function A(){c.value=c.value===!1}const R=()=>{switch(p.value){case"全版本":case 0:sessionStorage.setItem("version",sessionStorage.getItem("Beta"));break;case"正式版":case 1:sessionStorage.setItem("version",sessionStorage.getItem("Release"));break;case"测试版":case 2:sessionStorage.setItem("version",sessionStorage.getItem("Beta"));break}};function M(){let s,e;switch(p.value){case"全版本":e="2";break;case"正式版":e="0";break;case"测试版":e="1";break}m.value!==""?m.value.split(".")[1]&&(c.value===!0?s="1":s="0",u({s:m.value,m:s,b:e},!0,!0),_.value=!1,f.value=!0):(R(),_.value=!0,f.value=!1,u({v:sessionStorage.getItem("version"),b:e},!0,!1),k())}const p=l(0);function V(s){switch(m.value="",sessionStorage.setItem("version",sessionStorage.getItem("Beta")),s){case"全版本":sessionStorage.setItem("isBeta",""),u({v:sessionStorage.getItem("Beta")},!0),sessionStorage.setItem("version",sessionStorage.getItem("Beta"));break;case"正式版":sessionStorage.setItem("isBeta","0"),u({v:sessionStorage.getItem("Release"),b:"0"},!0),sessionStorage.setItem("version",sessionStorage.getItem("Release"));break;case"测试版":sessionStorage.setItem("isBeta","1"),u({v:sessionStorage.getItem("Beta"),b:"1"},!0),sessionStorage.setItem("version",sessionStorage.getItem("Beta"));break}}const _=l(!1);l(!1),l([]);const f=l(!1);function k(){setTimeout(()=>{let s=sessionStorage.getItem("isBeta"),e=sessionStorage.getItem("version");if(e==="1.2.x"){_.value=!1,f.value=!0;return}let o=parseInt(e.split(".")[1])-1;o=`1.${o}.x`,sessionStorage.setItem("version",o);let r;s===""?r={v:o}:r={v:o,b:s},u(r),_.value=!1},1e3)}const E=s=>{const e=s.split(".");let o=`${e[0]}.${e[1]}`;return parseFloat(o)>1.1?`https://minecraft.fandom.com/zh/wiki/%E5%9F%BA%E5%B2%A9%E7%89%88${s}`:`https://minecraft.fandom.com/zh/wiki/%E6%90%BA%E5%B8%A6%E7%89%88${s}`};return(s,e)=>{const o=j,r=$,g=D,d=P,S=q,I=W,h=H,B=J,C=K,L=Q,T=G,z=O,F=N;return b(),w(y,null,[a(r,{active:p.value,"onUpdate:active":e[0]||(e[0]=t=>p.value=t),onClick:V},{default:n(()=>[a(o,{name:"全版本"},{default:n(()=>[i("全版本")]),_:1}),a(o,{name:"正式版"},{default:n(()=>[i("正式版")]),_:1}),a(o,{name:"测试版"},{default:n(()=>[i("测试版")]),_:1})]),_:1},8,["active"]),a(F,{justify:"center",gutter:10},{default:n(()=>[a(S,{span:22},{default:n(()=>[a(g,{variant:"outlined",placeholder:"请输入版本号",onInput:M,modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t)},null,8,["modelValue"]),a(d,{onClick:A,modelValue:ae(c),"onUpdate:modelValue":e[2]||(e[2]=t=>se(c)?c.value=t:c=t),class:"mSwitch"},{default:n(()=>[i("模糊搜索")]),_:1},8,["modelValue"])]),_:1}),a(T,{"loading-text":"正在努力输出中...","finished-text":"一滴都没有了","error-text":"出错了出错了",finished:f.value,offset:"30",loading:_.value,"onUpdate:loading":e[3]||(e[3]=t=>_.value=t),check:"",onLoad:k},{default:n(()=>[(b(!0),w(y,null,ne(v,t=>(b(),oe(S,{key:t.version_all},{default:n(()=>[a(L,{title:t.version,subtitle:t.is_beta===0?"正式版":"测试版",layout:"column",ripple:"",outline:"outline",class:re(t.is_beta===0?"cardr":"cardb")},{description:n(()=>[a(h,null,{default:n(()=>[x("ul",null,[x("li",null,[i("更新日志： "),a(I,{type:"primary",target:"_blank",href:E(t.version),underline:"none"},{default:n(()=>[i("Minecraft Wiki ")]),_:2},1032,["href"])])])]),_:2},1024)]),extra:n(()=>[a(h,null,{default:n(()=>[a(C,{plain:"",type:"primary"},{default:n(()=>[a(I,{type:"primary",target:"_blank",disabled:t.ARMv7===null||t.ARMv7===""?!0:null,href:t.ARMv7,underline:"none"},{default:n(()=>[i("ARMv7 "),a(B,{name:"download"})]),_:2},1032,["disabled","href"])]),_:2},1024),a(C,{plain:"",type:"primary"},{default:n(()=>[a(I,{type:"primary",disabled:t.ARMv8===null||t.ARMv8===""?!0:null,target:"_blank",href:t.ARMv8,underline:"none"},{default:n(()=>[i("ARMv8 "),a(B,{name:"download"})]),_:2},1032,["disabled","href"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","class"])]),_:2},1024))),128))]),_:1},8,["finished","loading"]),a(z,{duration:300})]),_:1})],64)}}},ve=Z(le,[["__scopeId","data-v-8085f8c4"]]);export{ve as default};
