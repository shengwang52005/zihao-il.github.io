import{s as q,q as G,g as H,h as W,p as J,z as K,A as O,i as Q,k as X,B as Y,C as Z,e as ee,x as te,r as ae,d as se,t as oe,y as ne}from"./@varlet-752f7ee1.js";import{s as re,g as le}from"./index-31133a08.js";import{_ as ie}from"./_plugin-vue_export-helper-c27b6911.js";import{r as ue,b as l,o as ce,z as k,G as A,s as a,S as s,u as R,i as S,F as M,L as r,N as me,H as h,A as _e,B as pe}from"./@vue-6bb094e4.js";import"./@popperjs-b31fb82b.js";import"./axios-21b846bc.js";const de={__name:"download",setup(ve){const f=ue([]);let u=l(!1);async function c(o,e,n){let i;if(n===!0){const{data:p}=await re(o);if(p.status===201)return q.error("无此版本号！");i=p.message}else try{const{data:p}=await le(o);i=p.message}catch{u.value=!0,_.value=!1,v.value=!0;return}const b=l(i.slice().reverse());e===!0?f.splice(0,f.length,...b.value):f.push(...b.value)}ce(()=>{let o=setInterval(function(){let e=sessionStorage.getItem("Beta");e!==null&&(clearInterval(o),c({v:e}),sessionStorage.setItem("version",e))},100)});const d=l("");l("");let m=l(!0);function V(){m.value=m.value===!1}const E=()=>{switch(g.value){case"全版本":case 0:sessionStorage.setItem("version",sessionStorage.getItem("Beta"));break;case"正式版":case 1:sessionStorage.setItem("version",sessionStorage.getItem("Release"));break;case"测试版":case 2:sessionStorage.setItem("version",sessionStorage.getItem("Beta"));break}};function L(){let o,e;switch(g.value){case"全版本":e="2";break;case"正式版":e="0";break;case"测试版":e="1";break}d.value!==""?d.value.split(".")[1]&&(m.value===!0?o="1":o="0",c({s:d.value,m:o,b:e},!0,!0),_.value=!1,v.value=!0):(E(),_.value=!0,v.value=!1,c({v:sessionStorage.getItem("version"),b:e},!0,!1),C())}const g=l(0);function z(o){switch(d.value="",sessionStorage.setItem("version",sessionStorage.getItem("Beta")),o){case"全版本":sessionStorage.setItem("isBeta",""),c({v:sessionStorage.getItem("Beta")},!0),sessionStorage.setItem("version",sessionStorage.getItem("Beta"));break;case"正式版":sessionStorage.setItem("isBeta","0"),c({v:sessionStorage.getItem("Release"),b:"0"},!0),sessionStorage.setItem("version",sessionStorage.getItem("Release"));break;case"测试版":sessionStorage.setItem("isBeta","1"),c({v:sessionStorage.getItem("Beta"),b:"1"},!0),sessionStorage.setItem("version",sessionStorage.getItem("Beta"));break}}const _=l(!1);l(!1),l([]);const v=l(!1);function C(){setTimeout(()=>{let o=sessionStorage.getItem("isBeta"),e=sessionStorage.getItem("version");if(e==="1.2.x"){_.value=!1,v.value=!0;return}let n=parseInt(e.split(".")[1])-1;n=`1.${n}.x`,sessionStorage.setItem("version",n);let i;o===""?i={v:n}:i={v:n,b:o},c(i),_.value=!1},1e3)}const T=o=>{const e=o.split(".");let n=`${e[0]}.${e[1]}`;return parseFloat(n)>1.1?`https://minecraft.fandom.com/zh/wiki/%E5%9F%BA%E5%B2%A9%E7%89%88${o}`:`https://minecraft.fandom.com/zh/wiki/%E6%90%BA%E5%B8%A6%E7%89%88${o}`};return(o,e)=>{const n=J,i=G,b=K,p=O,y=Q,I=X,B=ae,w=se,x=oe,U=ne,F=Y,N=Z,$=H,P=ee,D=te,j=W;return k(),A(M,null,[a(i,{active:g.value,"onUpdate:active":e[0]||(e[0]=t=>g.value=t),onClick:z},{default:s(()=>[a(n,{name:"全版本"},{default:s(()=>[r("全版本")]),_:1}),a(n,{name:"正式版"},{default:s(()=>[r("正式版")]),_:1}),a(n,{name:"测试版"},{default:s(()=>[r("测试版")]),_:1})]),_:1},8,["active"]),a($,{justify:"center",gutter:10},{default:s(()=>[a(y,{span:22},{default:s(()=>[a(b,{variant:"outlined",placeholder:"请输入版本号",onInput:L,modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=t=>d.value=t)},null,8,["modelValue"]),a(p,{onClick:V,modelValue:R(m),"onUpdate:modelValue":e[2]||(e[2]=t=>S(m)?m.value=t:m=t),class:"mSwitch"},{default:s(()=>[r("模糊搜索")]),_:1},8,["modelValue"])]),_:1}),a(F,{"loading-text":"正在努力输出中...","finished-text":"一滴都没有了","error-text":"出错了出错了",finished:v.value,offset:"30",loading:_.value,"onUpdate:loading":e[3]||(e[3]=t=>_.value=t),check:"",onLoad:C},{default:s(()=>[(k(!0),A(M,null,me(f,t=>(k(),_e(y,{key:t.version_all},{default:s(()=>[a(U,{title:t.version,subtitle:t.is_beta===0?"正式版":"测试版",layout:"column",ripple:"",outline:"outline",class:pe(t.is_beta===0?"cardr":"cardb")},{description:s(()=>[a(B,null,{default:s(()=>[h("ul",null,[h("li",null,[r("更新日志： "),a(I,{type:"primary",target:"_blank",href:T(t.version),underline:"none"},{default:s(()=>[r("Minecraft Wiki ")]),_:2},1032,["href"])])])]),_:2},1024)]),extra:s(()=>[a(B,null,{default:s(()=>[a(x,{plain:"",type:"primary"},{default:s(()=>[a(I,{type:"primary",target:"_blank",disabled:t.ARMv7===null||t.ARMv7===""?!0:null,href:t.ARMv7,underline:"none"},{default:s(()=>[r("ARMv7 "),a(w,{name:"download"})]),_:2},1032,["disabled","href"])]),_:2},1024),a(x,{plain:"",type:"primary"},{default:s(()=>[a(I,{type:"primary",disabled:t.ARMv8===null||t.ARMv8===""?!0:null,target:"_blank",href:t.ARMv8,underline:"none"},{default:s(()=>[r("ARMv8 "),a(w,{name:"download"})]),_:2},1032,["disabled","href"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","class"])]),_:2},1024))),128))]),_:1},8,["finished","loading"]),a(N,{duration:300})]),_:1}),a(j,{"default-style":!1,show:R(u),"onUpdate:show":e[5]||(e[5]=t=>S(u)?u.value=t:u=t)},{default:s(()=>[a(D,{class:"result",type:"empty",title:"无法获取版本列表"},{description:s(()=>[h("p",null,[r(" 请前往 "),a(I,{class:"href-link",type:"primary",target:"_blank",href:"https://mc233.endyun.ltd/",underline:"none"},{default:s(()=>[r("静态站 ")]),_:1}),r(" 或联系管理员修复！ ")])]),footer:s(()=>[a(P,{color:"var(--result-empty-color)","text-color":"#fff",onClick:e[4]||(e[4]=t=>S(u)?u.value=!1:u=!1)},{default:s(()=>[r(" 知道了 ")]),_:1})]),_:1})]),_:1},8,["show"])],64)}}},he=ie(de,[["__scopeId","data-v-2fce573f"]]);export{he as default};
